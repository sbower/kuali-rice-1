<?xml version='1.0' encoding='UTF-8'?> 
<chapter xml:id="installation_steps" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://docbook.org/ns/docbook"  version="5.0">    
    <title>Installation Steps</title>
    <para>Kuali Rice has the potential to run on most platforms that support a Java development
        environment (not simply a runtime environment), a servlet container, and an Oracle or MySQL
        relational database management system (RDBMS).</para>
    <warning><para>Only platforms and configurations that have been tested and are known to work with Rice
        are described within this guide.</para></warning>
    <sect1>
        <title>Minimum System Requirements and Recommendations</title>
        <sect2>
            <title>Suggested Server Hardware</title>
            <para>Note that hardware needs may vary depending on the amount of expected load, the
                operating system being used, and the number of applications that are integrated with
                Kuali Rice.</para>
            <para>Kuali Rice is typically deployed with the database server separate from the
                application server. Requirements below are for the Rice Standalone application
                server.</para>
            <para>The recommended minimum requirements are as follows:<itemizedlist>
                    <listitem>
                        <para>Processor 1.5 GHz or faster (2 GHz preferred)</para>
                    </listitem>
                    <listitem>
                        <para>1024 MB (1 GB) of RAM or more</para>
                    </listitem>
                    <listitem>
                        <para>100 Mbit/s network card (gigabit preferred)</para>
                    </listitem>
                    <listitem>
                        <para>200 MB of hard disk space (for Tomcat server and web application)<itemizedlist>
                                <listitem>
                                    <para>Additional space needed if storing attachments</para>
                                </listitem>
                            </itemizedlist></para>
                    </listitem>
                </itemizedlist></para>
        </sect2>
        <sect2>
            <title>Suggested Operating Systems</title>
            <para>Since Kuali Rice is written in Java, it should in theory be able to run on any
                operating system that supports the required version of the Java runtime. However, it
                has been most actively tested on: <itemizedlist>
                    <listitem>
                        <para>Windows (XP and 7)</para>
                    </listitem>
                    <listitem>
                        <para>Mac OS X (10.6)</para>
                    </listitem>
                    <listitem>
                        <para>Linux (Ubuntu)</para>
                    </listitem>
                </itemizedlist></para>
            <para>Note that while Ubuntu Linux is the distribution most frequently used for testing,
                other Linux distributions such as Fedora, Red Hat Enterprise Linux, CentOS, Gentoo,
                and others should also be able to run Kuali Rice.</para>
            <para>Additionally, Kuali Rice will likely work on these operating systems, although the
                software has not been tested here:<itemizedlist>
                    <listitem>
                        <para>Sun Microsystems Solaris</para>
                    </listitem>
                    <listitem>
                        <para>IBM AIX</para>
                    </listitem>
                </itemizedlist></para>
        </sect2>
        <sect2>
            <title>Required Software</title>
            <para>All of these packages are required on the server with Rice:<itemizedlist>
                    <listitem>
                        <para>Sun Microsystems Java Development Kit (JDK 1.6.x)</para>
                        <warning><para>You must use a JDK and not a Java runtime environment (JRE); the JDK
                            you use must be version 1.6.x. Additionally, Rice has not been tested on
                            JDKs other than Sun. So alternative implementations like OpenJDK should
                            be used at your own risk.</para></warning>
                    </listitem>
                <listitem><para>Servlet container (Apache Tomcat 5.5+, or Jetty 6.1.1)</para></listitem>
                    <listitem>
                        <para>Apache Ant 1.8.1</para>
                    </listitem>
                    <listitem>
                        <para>Maven 3</para>
                    </listitem>
                </itemizedlist></para>
        </sect2>
        <sect2>
            <title>Required Database</title>
            <para>Ensure that the Oracle database you intend to use encodes character data in a UTF
                variant by default. For Oracle XE, this entails downloading the "Universal" flavor
                of the binary, which uses AL32UTF8.</para>
            <para>Rice runs, and has been tested with the following products:<itemizedlist>
                    <listitem>
                        <para><emphasis role="bold">Oracle 10g</emphasis>
                            <itemizedlist>
                                <listitem>
                                    <para>Oracle Database 10g Release 2 (10.2.0.4)</para>
                                </listitem>
                                <listitem>
                                    <para>Oracle Database 10g Release 2 (10.2.0.4) JDBC
                                        Driver</para>
                                </listitem>
                            </itemizedlist></para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">MySQL</emphasis><itemizedlist>
                                <listitem>
                                    <para>MySQL 5.1.+</para>
                                </listitem>
                                <listitem>
                                    <para>MySQL Connector/J (5.1.+)</para>
                                </listitem>
                            </itemizedlist></para>
                    </listitem>
                </itemizedlist></para>
            <para>You can adapt Rice to other standard relational databases (e.g., Sybase, Microsoft
                SQL Server, DB2, etc.). However, this Installation Guide does not provide
                information for running Rice with these products.</para>
        </sect2>
        <sect2>
            <title>Other Required Software</title>
            <para>Subversion 1.5 or greater if checking out projects from Kuali source
                control</para>
        </sect2>
        <sect2 xml:id="sources_for_required_software">
            <title>Sources for Required Software</title>
            <table frame="none">
                <title/>
                <tgroup cols="2">
                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                    <colspec colname="c2" colnum="2" colwidth="4.11*"/>
                    <thead>
                        <row>
                            <entry>Software</entry>
                            <entry>Download Location</entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>Sun Java JDK 1.6.x</entry>
                            <entry><link xlink:href="http://java.sun.com/javase/downloads/index.jsp">http://java.sun.com/javase/downloads/index.jsp</link></entry>
                        </row>
                        <row>
                            <entry>Apache Ant 1.7.1</entry>
                            <entry>
                                <link xlink:href="http://mirror.olnevhost.net/pub/apache/ant/binaries/apache-ant-1.7.1-bin.tar.gz">http://mirror.olnevhost.net/pub/apache/ant/binaries/apache-ant-1.7.1-bin.tar.gz
                                </link></entry>
                        </row>
                        <row>
                            <entry>Maven 2.0.9</entry>
                            <entry><link
                                    xlink:href="http://archive.apache.org/dist/maven/binaries/apache-maven-2.0.9-bin.tar.gz"
                                    >http://archive.apache.org/dist/maven/binaries/apache-maven-2.0.9-bin.tar.gz</link></entry>
                        </row>
                        <row>
                            <entry>MySQL Connector/J JDBC Driver</entry>
                            <entry><link xlink:href="http://www.mysql.com/products/connector/j/"
                                    >http://www.mysql.com/products/connector/j/</link></entry>
                        </row>
                        <row>
                            <entry>Oracle 10g XPress</entry>
                            <entry><link
                                    xlink:href="http://www.oracle.com/technology/products/database/xe/index.html
"
                                    >http://www.oracle.com/technology/products/database/xe/index.html
                                </link></entry>
                        </row>
                        <row>
                            <entry>Oracle JDBC DB Driver</entry>
                            <entry><link
                                    xlink:href="http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/htdocs/jdbc_10201.html"
                                    >http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/htdocs/jdbc_10201.html</link></entry>
                        </row>
                        <row>
                            <entry>Squirrel SQL client</entry>
                            <entry><link xlink:href="http://squirrel-sql.sourceforge.net/"
                                    >http://squirrel-sql.sourceforge.net/</link></entry>
                        </row>
                        <row>
                            <entry>Tomcat 5.5.27</entry>
                            <entry><link
                                    xlink:href="http://mirrors.homepagle.com/apache/tomcat/tomcat-5/v5.5.27/bin/apache-tomcat-5.5.27.zip"
                                    >http://mirrors.homepagle.com/apache/tomcat/tomcat-5/v5.5.27/bin/apache-tomcat-5.5.27.zip</link></entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </sect2>
        <sect2>
            <title>Software Distributions</title>
            <para>The Kuali Rice software is available through three different distributions:<table
                    frame="none">
                    <title/>
                    <tgroup cols="2">
                        <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                        <colspec colname="c2" colnum="2" colwidth="6.14*"/>
                        <thead>
                            <row>
                                <entry>Distribution</entry>
                                <entry>Description</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>Binary</entry>
                                <entry>This distribution consists of all the necessary binaries,
                                    supporting files and database schemas and data for running Kuali
                                    Rice as a web application or within an embedded client
                                    application.</entry>
                            </row>
                            <row>
                                <entry>Source</entry>
                                <entry>The source code and build scripts necessary for compiling and
                                    building Rice, a process described in the appendices.</entry>
                            </row>
                            <row>
                                <entry>Server</entry>
                                <entry>Rice in the form of a web application archive (WAR) along
                                    with database schemas and data. </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table></para>
            <sect3>
                <title>Obtaining the Software</title>
                <para>The Kuali Foundation makes the most current version of the Rice software
                    available at: <link xlink:href="http://rice.kuali.org/download"
                        >http://rice.kuali.org/download</link></para>
            </sect3>
        </sect2>
    </sect1>
    <sect1>
        <title>Installation Checklist</title>
        <para>To install Kuali Rice 1.0.3, follow these steps:<orderedlist>
                <listitem>
                    <para>Install a database. Refer to the appendices for detailed instructions on
                        how to do this.</para>
                </listitem>
                <listitem>
                    <para>Create a non-privileged user that will run Rice.</para>
                </listitem>
                <listitem>
                    <para>Install a JDK</para>
                </listitem>
                <listitem>
                    <para>Configure the Operating System.</para>
                </listitem>
                <listitem>
                    <para>Install the JDBC drivers.</para>
                </listitem>
                <listitem>
                    <para>Set up ImpEx process to create the database schema and populate it.</para>
                </listitem>
                <listitem>
                    <para>Obtain the WAR file from the Rice server distribution.</para>
                </listitem>
                <listitem>
                    <para>Install and configure a servlet container.</para>
                </listitem>
                <listitem>
                    <para>Test the installation</para>
                </listitem>
            </orderedlist></para>
        <sect2>
            <title>Create a Non-privileged User for Rice To Use</title>
<!-- Quick Start Best Practice -->
            <para>Typically, you use this command to add a user to CentOS:</para>
            <programlisting># useradd –d /home/rice –s `which bash` rice 
# passwd rice 
New UNIX password: &lt;enter kualirice> 
Retype new UNIX password: &lt;enter kualirice> 
passwd: all authentication tokens updated successfully.             </programlisting>
<!-- End Quick Start Best Practice -->        
        </sect2>
        <sect2>
            <title>Distribution</title>
            <para>To begin installation with a Kuali Rice provided distribution, just uncompress the
                software you retrieved from download location at the Rice web site. For the purposes
                of this guide, we will be focusing on installation of the server
                distribution.</para>
<!-- Quick Start Best Practice -->
            <para>Uncompress the server distribution downloaded from the Rice site:<orderedlist>
                    <listitem>
                        <para>Verify that you are logged in as the <emphasis role="bold"
                                >root</emphasis> user</para>
                    </listitem>
                    <listitem>
                        <para>Change directory to where the distributions are located</para>
                        <programlisting># cd /opt/software/distribution</programlisting>
                    </listitem>
                    <listitem>
                        <para>Uncompress the distribution<orderedlist>
                                <listitem>
                                    <para>Follow the steps below to uncompress the Binary
                                    distribution:</para>
                                    <programlisting># mkdir binary
# unzip rice-1.0.3-bin.zip -d binary
# chmod -R 777 /opt/software                                                  </programlisting>
                                </listitem>
                                <listitem>
                                    <para>Follow the steps below to uncompress the Server
                                    distribution:</para>
                                    <programlisting># mkdir server
# unzip rice-1.0.3-server.zip -d server
# chmod -R 777 /opt/software                                                 </programlisting>
                                </listitem>
                            </orderedlist></para>
                    </listitem>
                </orderedlist></para>
            
<!-- End Quick Start Best Practice -->
        </sect2>
        <sect2>
            <title>OS Setup</title>
<!-- Quick Start Best Practice -->
            <para>It is a best practice to modify your system parameters as described here. These
                are just suggested system parameters. Use your best judgment about how to set up
                your system.<itemizedlist>
                    <listitem>
                        <para>Verify that you are starting out in the<emphasis role="bold">
                                /etc</emphasis> directory:</para><programlisting>computername $ pwd
/etc                                </programlisting>
                    </listitem>
                    <listitem>
                        <para>Add this to <emphasis role="bold">/etc/profile</emphasis> to setup ant
                            and maven first in the path:</para><programlisting>JAVA_HOME=/usr/java/jdk1.6.0_16
CATALINA_OPTS="-Xmx512m -XX:MaxPermSize=256m"
ANT_HOME=/usr/local/ant
ANT_OPTS="-Xmx1512m -XX:MaxPermSize=192m"
MAVEN_HOME=/usr/local/maven
MAVEN_OPTS="-Xmx768m -XX:MaxPermSize=128m"
GROOVY_HOME=/usr/local/groovy

PATH=$JAVA_HOME/bin:$ANT_HOME/bin:$MAVEN_HOME/bin:$GROOVY_HOME/bin:$PATH
export JAVA_HOME CATALINA_OPTS ANT_HOME ANT_OPTS MAVEN_OPT GROOVY_HOME                         </programlisting>
                    </listitem>
                    <listitem>
                        <para>After you have completed your update of the /etc/profile file, please
                            execute this command to immediately update your profile with the changes
                            from above:</para><programlisting>source /etc/profile</programlisting>
                    </listitem>
                </itemizedlist></para>
            
<!-- End Quick Start Best Practice -->            
        </sect2>
    </sect1>
    <sect1>
        <title>Install the JDBC Drivers</title>
        <warning><para>You must install the JDBC (Java Database Connectivity) driver for MySQL and Oracle to satisfy the requirement for the structure of the Ant target in the build process.</para></warning>
        <sect2>
            <title>Rice software database drivers directory defaults</title>
            <para><emphasis role="bold">/java/drivers</emphasis> is a hard coded directory that the
                Rice scripts use as a default directory in which to search for drivers when the
                installation scripts are running.</para>
        </sect2>
        <sect2>
            <title>MySQL JDBC Driver</title>
            <para>Kuali Rice uses the MySQL Connector/J product as the native JDBC driver.</para>
            <para>You can obtain the driver from the MySQL website Once you have downloaded the JDBC
                driver that corresponds to your version of MySQL, copy it to <emphasis role="bold"
                    >/java/drivers</emphasis>.</para>
        </sect2>
        <sect2>
            <title>Oracle JDBC driver</title>
            <para>Kuali Rice uses the standard Oracle JDBC driver as the native JDBC driver.</para>
            <para>You must download the Oracle JDBC from the Oracle website directly due to
                licensing restrictions. Please refer to the Sources for Required Software section in
                this Guide to find the download location for this software. Once you have downloaded
                the JDBC driver, copy it to <emphasis role="bold">/java/drivers</emphasis>. </para>
        </sect2>
    </sect1>
    <sect1 xml:id="set_up_impex_process">
        <title>Set Up the ImpEx Process to Build the Database</title>
            <sect2>
                <title>Overview</title>
                <para>The ImpEx tool is a Kuali-developed application which is based on <link
                        xlink:href="http://db.apache.org/torque">Apache Torque</link>. It reads in
                    database structure and data from XML files in a platform independent way and
                    then creates the resulting database in either Oracle or MySQL.</para>
            </sect2>
        
        <sect2>
            <title>Obtaining the ImpEx Tool</title>
            <para>The ImpEx tool is included in the Rice binary and server distributions. It is
                located in the <emphasis role="bold">database/database-impex</emphasis> directory of
                the relevant archive. If you are building Rice from source, the ImpEx tool can be
                acquired from Subversion:</para>
            <programlisting>svn co https://test.kuali.org/svn/kul-cfg-dbs/trunk</programlisting>
        </sect2>
        <sect2>
            <title>Oracle ImpEx Preconfiguration Setup</title>
            <para>For Oracle users, you must run two scripts on your Oracle database before
                continuing on to the ImpEx development database ingestion process. Please contact
                your DBA and have him or her run these two setup scripts as the <emphasis
                    role="bold">Oracle SYS user</emphasis>. These scripts will be in the <emphasis
                    role="bold">database/database-impex</emphasis> distribution (or the impex
                subdirectory if you checked out the tool from svn). These are the commands, and they
                must be run in this order:<orderedlist>
                    <listitem>
                        <para><emphasis role="bold">create_kul_developer.sql</emphasis> (Creates the
                                <emphasis role="bold">KUL_DEVELOPER</emphasis> role and applies
                            grants)</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">system_grants.sql</emphasis> (Creates the
                                <emphasis role="bold">KULUSERMAINT</emphasis> user for Rice Oracle
                            system maintenance)</para>
                    </listitem>
                </orderedlist></para>
            <note><para>Please inform your DBA that the above scripts must be run under the Oracle SYS account.</para></note>
            <para>After your DBA runs the above scripts, you must run two more scripts as the kulusermaint:<orderedlist>
                    <listitem>
                        <para><emphasis role="bold">create_admin_user.sql</emphasis> (Creates the
                                <emphasis role="bold">kuluser_admin</emphasis> user)</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">kuluser_maint_pk.sql</emphasis> (Creates the
                            package containing the functions that the Rice system uses to do Oracle
                            system maintenance)</para>
                    </listitem>
                </orderedlist></para>
        </sect2>
        <sect2>
            <title>ImpEx Configuration Overview</title>
            <para>The Rice team released four different sets of data with Rice 1.0.3. The server
                distribution contains only the first two listed, whereas the binary distribution
                contains all four. You can find these datasets in the /database directory of the
                relevant archive:<orderedlist>
                    <listitem>
                        <para><emphasis role="bold">bootstrap-server-dataset</emphasis> – This is
                            the core dataset. The Rice standalone server cannot function properly
                            without this data.</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">demo-server-dataset </emphasis>– This is a
                            superset of the bootstrap-server-dataset which, in addition to necessary
                            bootstrap data, includes sample security groups and workflow
                            documents.</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">bootstrap-client-dataset</emphasis> – This
                            dataset is necessary for creating a Rice client application </para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">demo-client-dataset </emphasis>– This is a
                            superset of the data in the bootstrap-client-dataset. In addition to
                            necessary bootstrap data, it includes tables used by some of the Rice
                            sample client applications.</para>
                    </listitem>
                </orderedlist></para>
            <para>This guide does not deal with developing a client application; for more information on creating a Rice client application and the use of the client datasets, see the Global Technical Reference Guide.</para>
        </sect2>
        <sect2>
            <title>impex-build.properties Reference</title>
            <para>After you have uncompressed the distribution (Binary or Server) you will use for
                Rice, login as the user that you use to run the Tomcat server:<orderedlist>
                    <listitem>
                        <para>1. Go to the sub-directory, <emphasis role="bold">&lt;directory where
                                uncompressed>/database/database-impex</emphasis>. This directory is
                            the same for each of the distributions.</para>
                    </listitem>
                    <listitem>
                        <para>Copy the <emphasis role="bold"
                                >impex-build.properties.sample</emphasis> file to your home
                            directory, renaming the file to <emphasis role="bold"
                                >impex-build.properties</emphasis>.</para>
                    </listitem>
                </orderedlist></para>
        </sect2>
        <sect2>
            <title>Specific impex-build.properties database parameter setup</title>
            <sect3>
                <title>For MySQL Users</title>
                <orderedlist>
                    <listitem>
                        <para>Configure the <emphasis role="bold">drivers.directory</emphasis>, the
                            directory where the MySQL and Oracle JDBC drivers are located.</para>
                    </listitem>
                    <listitem>
                        <para>Configure <emphasis role="bold">import.torque.database.*</emphasis>.
                            Set the user and password to the user under which you want to run the
                            Rice software.</para>
                    </listitem>
                    <listitem>
                        <para>Configure <emphasis role="bold">import.admin.user</emphasis> and
                                <emphasis role="bold">import.admin.password</emphasis>.</para>
                    </listitem>
                </orderedlist>
            </sect3>
            <sect3>
                <title>For Local MySQL Server</title>
                <para>Set import.admin.url as follows:</para>
                <para><programlisting>import.admin.url=jdbc:mysql://localMySQLServerComputerName:MySQL-port-number/</programlisting></para>
                <para>Example: <emphasis role="bold"
                        >import.admin.url=jdbc:mysql://localhost:3306/</emphasis></para>
            </sect3>
            <sect3>
                <title>For Remote MySQL Server</title>
                <para>Set import.admin.url as follows:</para>
                <para><programlisting>import.admin.url=jdbc:mysql://remoteMySQLServerComputerName:MySQL-port-number/</programlisting></para>
                <para>Example: <emphasis role="bold"
                        >import.admin.url=jdbc:mysql://192.168.25.22:3306/</emphasis></para>
                <para>To setup the database from one of the distributions, change directories to
                    /database/database-impex and use these commands:</para>
                <para><programlisting>ant create-schema 
ant import</programlisting></para>
            </sect3>
            <sect3>
                <title>For Oracle users</title>
                <orderedlist>
                    <listitem>
                        <para>Configure the <emphasis role="bold">drivers.directory</emphasis>, the
                            directory where the MySQL and Oracle JDBC drivers are located.</para>
                    </listitem>
                    <listitem>
                        <para>Configure <emphasis role="bold">import.torque.database.*</emphasis>
                            for the Oracle setup. Set the user and password to the user under which
                            you want to run the Rice software.</para>
                    </listitem>
                    <listitem>
                        <para>Configure <emphasis role="bold">import.admin.user</emphasis> and
                                <emphasis role="bold">import.admin.password</emphasis>.</para>
                        <para><programlisting>import.admin.url= ${import.torque.database.url}</programlisting></para>
                    </listitem>
                    <listitem>
                        <para>Configure <emphasis role="bold">oracle.usermaint.*</emphasis></para>
                    </listitem>
                    <listitem>
                        <para>To setup the database from one of the distributions, use these Ant
                            commands:</para>
                        <para><programlisting>ant create-schema 
ant import </programlisting></para>
                    </listitem>
                </orderedlist>
            </sect3>
        </sect2>
        <sect2>
            <title>Verifying your Database Installation</title>
            <para>At this point, your Kuali Rice database should be successfully installed. To
                verify this, log into your database and verify the number of tables that are
                present. There should be at least 200 (the number will be different for mysql and
                oracle).</para>
        </sect2>
    </sect1>
    <sect1>
        <title>Installing Kuali Rice 1.0.3 Standalone Server</title>
        <sect2>
            <title>UNIX-Like Operating Environments</title>
            <sect3>
                <title>Setting Up Apache Tomcat</title>
<!-- Quick Start Best Practice --> 
                <para>Once you have downloaded Tomcat , please install it using these steps:<itemizedlist>
                        <listitem>
                            <para>Log in as root</para>
                        </listitem>
                        <listitem>
                            <para>Copy or download the file <emphasis role="bold"
                                    >apache-tomcat-5.5.27.zip</emphasis> to <emphasis role="bold"
                                    >/opt/software/tomcat</emphasis> using this code:</para>
                            <para><programlisting>cd /opt/software/Tomcat
unzip apache-tomcat-5.5.27.zip -d /usr/local
ln -s /usr/local/apache-tomcat-5.5.27 /usr/local/tomcat
chown -R rice:rice /usr/local/apache-tomcat-5.5.27
cd /usr/local/tomcat/bin
chmod -R 755 *.sh
su - rice
cd /usr/local/tomcat/bin
./startup.sh               </programlisting></para>
                        </listitem>
                        <listitem>
                            <para>You should see something like this:</para>
                            <para><programlisting>Using CATALINA_BASE:	/usr/local/tomcat
Using CATALINA_HOME:	/usr/local/tomcat
Using CATALINA_TMPDIR:	/usr/local/tomcat/temp
Using JRE_HOME:		/usr/java/jdk1.6.0_16                            </programlisting></para>
                        </listitem>
                </itemizedlist></para>
                <para>Now that Tomcat is running:<orderedlist>
                        <listitem>
                            <para>To test that Tomcat came up successfully, try to browse
                                    to<emphasis role="bold"> http:// yourlocalip:8080</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>If you successfully browsed to http://yourlocalip:8080, then
                                execute this command as the rice user:</para>
                            <para><programlisting>./shutdown.sh
Using CATALINA_BASE:	/usr/local/tomcat
Using CATALINA_HOME:   	/usr/local/tomcat
Using CATALINA_TMPDIR:	/usr/local/tomcat/temp
Using JRE_HOME:	 	    /usr/java/jdk1.6.0_16</programlisting></para>
                        </listitem>
                </orderedlist></para>
                <warning>
                    <para>At times, Tomcat can have a session related problem with OJB where if you stop the server it won’t start again.  This can be fixed by deleting the SESSIONS.ser file in the  %TOMCAT_HOME%/work/Catalina/%host name%/%webapp% directory</para>
                    <para>This can be prevented by setting the saveOnRestart property to be false in
                        the web application’s context.xml file as documented here: <link
                            xlink:href="http://tomcat.apache.org/tomcat-5.5-doc/config/manager.html"
                            >http://tomcat.apache.org/tomcat-5.5-doc/config/manager.html</link>.</para>
                </warning>
<!-- End Quick Start Best Practice -->
            </sect3>
        </sect2>
    </sect1>
    <sect1>
        <title>Setting Up the Rice Application</title>
        <sect2>
            <title>Deploying the WAR file</title>
            <para>Copy the kr-dev.war file from the base directory of the server distribution to the
                directory that contains web applications in your servlet container. For Apache
                Tomcat 5.5.x, this is <emphasis role="bold"
                    >[Tomcat-root-directory]/webapps</emphasis>.</para>
            <sect3>
                <title>Setting Up the Database JDBC Drivers for Tomcat</title>
                <para>Copy the database-specific JDBC driver to the
                [Tomcat-root-directory]/common/lib.</para>
<!-- Quick Start Best Practice --> 
                <itemizedlist>
                    <listitem>
                        <para>Login as the root user:</para>
                        <para><programlisting>su – rice</programlisting></para>
                    </listitem>
                    <listitem>
                        <para>MySQL</para>
                        <para><programlisting>cp -p /java/drivers/mysql-connector-java-5.1.5-bin.jar /usr/local/tomcat/common/lib</programlisting></para>
                    </listitem>
                    <listitem>
                        <para>Oracle</para>
                        <para><programlisting>cp -p /java/drivers/ojdbc14.jar /usr/local/tomcat/common/lib</programlisting></para>
                    </listitem>
                </itemizedlist>
<!-- End Quick Start Best Practice -->                
            </sect3>
            <sect3>
                <title>Configuring the rice-config.xml File</title>
                <para>By default when it starts, Rice attempts to read the <emphasis role="bold"
                        >rice-config.xml</emphasis> configuration file from the paths in this order:<orderedlist>
                        <listitem>
                            <para>/usr/local/rice/rice-config.xml </para>
                        </listitem>
                        <listitem>
                            <para>${rice.base}../../../conf/rice-config.xml </para>
                        </listitem>
                        <listitem>
                            <para>${rice.base}../../conf/rice-config.xml </para>
                        </listitem>
                        <listitem>
                            <para>${additional.config.locations} </para>
                        </listitem>
                    </orderedlist></para>
                <para>The value for <emphasis role="bold">rice.base</emphasis> is calculated using
                    different locations until a valid location is found. Kuali calculates it using
                    these locations in this sequence:<orderedlist>
                        <listitem>
                            <para>ServletContext.getRealPath("/") </para>
                        </listitem>
                        <listitem>
                            <para><emphasis role="bold">catalina.base</emphasis> system property
                            </para>
                        </listitem>
                        <listitem>
                            <para>The current working directory</para>
                        </listitem>
                    </orderedlist></para>
                <para>An example <emphasis role="bold">rice-config.xml</emphasis> file is included
                    in the server distribution under <emphasis role="bold"
                        >web/src/main/config/example-config</emphasis></para>
<!-- Quick Start Best Practice -->  
                <para>To get the <emphasis role="bold">rice-config.xml</emphasis> and other Rice
                    configuration files into their correct locations, follow these steps:<itemizedlist>
                        <listitem>
                            <para>Login as root:</para>
                            <para><programlisting>mkdir /usr/local/rice
chown rice:rice /usr/local/rice
chmod 755 /usr/local/rice
cd /opt/software/kuali/src/rice-release-1-0-2-br/web/src/main/config/example-config/
cp -p rice-config.xml /usr/local/rice
cp -p log4j.properties /usr/local/rice
cd /usr/local/rice
chown rice:rice log4j.properties
chown rice:rice rice-config.xml
su - rice 
cd /usr/local/rice</programlisting></para>
                            <para>Modify the database parameters in the <emphasis role="bold"
                                    >rice-config.xml</emphasis> file. The values should conform to
                                the values you used with the ImpEx tool (listed in the <emphasis
                                    role="bold">impex-build.properties</emphasis> file). </para>
                            <para><programlisting>datasource.url=jdbc:mysql://localhost:3306/rice
datasource.username=rice
datasource.password=kualirice
datasource.url=jdbc:mysql://remoteMySQLServerComputerName:3306/rice
datasource.username=rice
datasource.password=kualirice</programlisting></para>
                            <para>If you are using Oracle, the JDBC URL will have this general
                                form:</para>
                            <para><programlisting>datasource.url=jdbc:oracle:thin:@remoteMySQLServerComputerName:1521:ORACLE_SID</programlisting></para>
                            <para>At this point, you are ready to try to bring up the Tomcat server
                                with the Rice web application:</para>
                            <para><programlisting>cd /usr/local/tomcat/bin
./startup.sh</programlisting></para>
                        </listitem>
                        <listitem>
                            <para>Check if Tomcat and Rice started successfully:</para>
                            <para><programlisting>cd /usr/local/tomcat/logs
tail -n 500 -f catalina.out</programlisting></para>
                            <para>If your Rice server started up successfully, browse to the site
                                    <emphasis role="bold">http://yourlocalip:8080/kr-dev</emphasis>.
                                You should see the Rice portal screen which will look something like this:
                            </para>
                            <figure>
                                <title>Rice Portal Main Menu</title>
                                <mediaobject>
                                    <imageobject>
                                        <imagedata fileref="../images/rice_portal_main_menu.png"/>
                                    </imageobject>
                                    </mediaobject>
                            </figure>    
                        </listitem>
                    </itemizedlist></para>    
<!-- End Quick Start Best Practice -->
                <sect4>
                    <title>Parameters</title>
                <para>The tables below have the basic set of parameters for rice-config.xml that you
                    need to get an instance of Rice running. Please use these tables as a beginning
                    reference to modify your rice-config.xml file. </para>
                <warning>
                    <para>Make sure the <emphasis role="bold">application.url</emphasis> and
                        database user name and password are set correctly.</para>
                </warning>  
                <table frame="none">
                    <title>Core </title>
                    <tgroup cols="3">
                        <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                        <colspec colname="c2" colnum="2" colwidth="1.56*"/>
                        <colspec colname="c3" colnum="3" colwidth="1.39*"/>
                        <thead>
                            <row>
                                <entry>Parameter</entry>
                                <entry>Description</entry>
                                <entry>Examples or Values</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>application.url </entry>
                                <entry>The external URL used to access the Rice web
                                    interface; edit only the fully-qualified domain name and
                                    port of the server </entry>
                                <entry>http://yourlocalip:8080/kuali-rice-url</entry>
                            </row>
                            <row>
                                <entry>app.context.name</entry>
                                <entry><para>Context name of the web application</para>
                                    <itemizedlist>
                                        <listitem>
                                          <para>Essentially, the name of the WAR file</para>
                                        </listitem>
                                        <listitem>
                                          <para>Used to build the path for images and help
                                          URLs</para>
                                        </listitem>
                                    </itemizedlist></entry>
                                <entry>kuali-rice-url
                                    (This value should not be changed)
                                </entry>
                            </row>
                            <row>
                                <entry>log4j.settings.path </entry>
                                <entry>Path to log4j.properties file. If the file does not
                                    exist, you must create it.</entry>
                                <entry>/usr/local/rice/log4j.properties</entry>
                            </row>
                            <row>
                                <entry>log4j.settings.reloadInterval</entry>
                                <entry>interval (in minutes) to check for changes to the
                                    log4j.properties file</entry>
                                <entry>5</entry>
                            </row>
                            <row>
                                <entry>mail.smtp.host</entry>
                                <entry>SMTP host name or IP (This param is not in the
                                    default config.) </entry>
                                <entry>localhost</entry>
                            </row>
                            <row>
                                <entry>config.location</entry>
                                <entry>Location of configuration file to load
                                    environment-specific configuration parameters (This
                                    param is not in the default config.) </entry>
                                <entry>/usr/local/rice/rice-config-${environment}.xml</entry>
                            </row>
                            <row>
                                <entry>sample.enabled</entry>
                                <entry>Enable the sample application</entry>
                                <entry>boolean</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
            <table frame="none">
                <title>Database</title>
                <tgroup cols="3">
                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                    <colspec colname="c2" colnum="2" colwidth="1.55*"/>
                    <colspec colname="c3" colnum="3" colwidth="2.34*"/>
                    <thead>
                        <row>
                            <entry>Parameter</entry>
                            <entry>Description</entry>
                            <entry>Examples or Values</entry>
                        </row>
                    </thead>
                    <tbody>
                            <row>
                                <entry>datasource.ojb.platform </entry>
                                <entry>Name of OJB platform to use for the database </entry>
                                <entry>Oracle9i or MySQL</entry>
                            </row>
                            <row>
                                <entry>datasource.platform </entry>
                                <entry>Rice platform implementation for the database </entry>
                                <entry>
                                    <itemizedlist>
                                        <listitem>
                                          <para>org.kuali.rice.core.database.platform.DerbyPlatform</para>
                                        </listitem>
                                        <listitem>
                                          <para>org.kuali.rice.core.database.platform.OraclePlatform</para>
                                        </listitem>
                                        <listitem>
                                          <para>org.kuali.rice.core.database.platform.MySQLPlatform
                                          </para>
                                        </listitem>
                                    </itemizedlist>
                                </entry>
                            </row>
                            <row>
                                <entry>datasource.driver.name </entry>
                                <entry>JDBC driver for the database </entry>
                                <entry>
                                    <itemizedlist>
                                        <listitem>
                                          <para>org.apache.derby.jdbc.EmbeddedDriver,</para>
                                        </listitem>
                                        <listitem>
                                          <para>oracle.jdbc.driver.OracleDriver</para>
                                        </listitem>
                                        <listitem>
                                          <para>com.mysql.jdbc.Driver </para>
                                        </listitem>
                                    </itemizedlist>
                                </entry>
                            </row>
                            <row>
                                <entry>datasource.username </entry>
                                <entry>User name for connecting to the server database </entry>
                                <entry>rice</entry>
                            </row>
                            <row>
                                <entry>datasource.password </entry>
                                <entry>Password for connecting to the server database </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>datasource.url </entry>
                                <entry>JDBC URL of database to connect to </entry>
                                <entry>
                                    <itemizedlist>
                                        <listitem>
                                            <para>jdbc:oracle:thin:@localhost:1521:XE</para>
                                        </listitem>
                                        <listitem>
                                            <para>jdbc:mysql://localhost:3306/kuldemo </para>
                                        </listitem>
                                    </itemizedlist>
                                </entry>
                            </row>
                            <row>
                                <entry>datasource.pool.minSize </entry>
                                <entry>Minimum number of connections to hold in the pool </entry>
                                <entry>an integer value suitable for your environment</entry>
                            </row>
                            <row>
                                <entry>datasource.pool.maxSize </entry>
                                <entry>Maximum number of connections to allocate in the pool </entry>
                                <entry>an integer value suitable for your environment</entry>
                            </row>
                            <row>
                                <entry>datasource.pool.maxWait </entry>
                                <entry>Maximum amount of time (in ms) to wait for a connection from
                                    the pool </entry>
                                <entry>10000</entry>
                            </row>
                            <row>
                                <entry>datasource.pool.validationQuery </entry>
                                <entry>Query to validate connections from the database </entry>
                                <entry>select 1 from dual</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <table frame="none">
                    <title>KSB</title>
                    <tgroup cols="3">
                        <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                        <colspec colname="c2" colnum="2" colwidth="1.55*"/>
                        <colspec colname="c3" colnum="3" colwidth="2.34*"/>
                        <thead>
                            <row>
                                <entry>Parameter</entry>
                                <entry>Description</entry>
                                <entry>Examples or Values</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>serviceServletUrl </entry>
                                <entry>URL that maps to the KSBDispatcherServlet (include a trailing
                                    slash); This param is not in the default config. </entry>
                                <entry></entry>
                            </row>
                            <row>
                                <entry>keystore.file </entry>
                                <entry>Path to the keystore file to use for security </entry>
                                <entry>/usr/local/rice/rice.keystore</entry>
                            </row>
                            <row>
                                <entry>keystore.alias </entry>
                                <entry>Alias of the standalone server's key </entry>
                                <entry>see section entitled Generating the Keystore</entry>
                            </row>
                            <row>
                                <entry>keystore.password </entry>
                                <entry>Password to access the keystore and the server's key </entry>
                                <entry>see section entitled Generating the Keystore</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table> 
                <table frame="none">
                    <title>KEN</title>
                    <tgroup cols="3">
                        <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                        <colspec colname="c2" colnum="2" colwidth="1.55*"/>
                        <colspec colname="c3" colnum="3" colwidth="2.34*"/>
                        <thead>
                            <row>
                                <entry>Parameter</entry>
                                <entry>Description</entry>
                                <entry>Examples or Values</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>notification.basewebappurl </entry>
                                <entry>Base URL of the KEN web application (This param is not in the
                                    default config.) </entry>
                                <entry></entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table> 
                <table frame="none">
                    <title>KEW</title>
                    <tgroup cols="3">
                        <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                        <colspec colname="c2" colnum="2" colwidth="1.55*"/>
                        <colspec colname="c3" colnum="3" colwidth="2.34*"/>
                        <thead>
                            <row>
                                <entry>Parameter</entry>
                                <entry>Description</entry>
                                <entry>Examples or Values</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>workflow.url </entry>
                                <entry>URL to the KEW web module</entry>
                                <entry>${application.url}/kew</entry>
                            </row>
                            <row>
                                <entry>plugin.dir </entry>
                                <entry>Directory from which plugins will be loaded </entry>
                                <entry>/usr/local/rice/plugins</entry>
                            </row>
                            <row>
                                <entry>attachment.dir.location </entry>
                                <entry>Directory where attachments will be stored (This param is not
                                    in the default config.) </entry>
                                <entry/>
                            </row>
                        </tbody>
                    </tgroup>
                </table>   
              </sect4>     
            </sect3>
        </sect2>
    </sect1>
</chapter>
