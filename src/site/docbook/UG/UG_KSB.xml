<?xml version='1.0' encoding='UTF-8'?>
<chapter xml:id="UG_KSB" xmlns="http://docbook.org/ns/docbook" version="5.0">
    <title>KSB</title>
    <sect1>
        <title>What is the Kuali Service Bus?</title>
        <para>The Kuali Service Bus (KSB) is a lightweight service bus designed to allow developers
            to quickly develop and deploy services for remote and local consumption. At the heart of
            the KSB is a service registry. This registry is a listing of all services available for
            consumption on the bus. The registry provides the bus with the information necessary to
            achieve load balancing, failover, and more.</para>
        <para>
            <figure>
                <title>Kuali Service Bus</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="../images/kuali_service_bus.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
        </para>
        <para>You can deploy services to the bus using Spring or programmatically. Services must be
            named when they are deployed to the bus. Services are acquired from the bus using their
            name. </para>
        <sect2>
            <title>Features</title>
            <itemizedlist>
                <listitem>
                    <para><emphasis role="bold">Transactional Asynchronous Messaging</emphasis> -
                        You can call services asynchronously to support a 'fire and forget' model of
                        calling services. Messaging participates in existing JTA transactions, so
                        that messages are not sent until the currently running transaction is
                        committed and are not sent if the transaction is rolled back. You can
                        increase the performance of service calling code because you are not waiting
                        for a response. </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Synchronous Messaging</emphasis> - Call any service
                        on the bus using a request response paradigm. </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Queue Style Messaging</emphasis> - Supports
                        executing Java services using message queues. When a message is sent to a
                        queue, only one of the services listening for messages on the queue is given
                        the message. </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Topic Style Messaging</emphasis> - Supports
                        executing Java services using messaging topics. When a message is sent to a
                        topic, all services that are listening for messages on the topic receive the
                        message. </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Quality of Service</emphasis> - Determines how
                        queues and topics handle messages that have problems. Time to live is
                        supported, giving the message a configured amount of time to be handled
                        successfully before exception handling is invoked for that message type.
                        Messages can be given a number of retry attempts before exception handling
                        is invoked. The delay separating each call increases. Exception handlers can
                        be registered with each queue and topic for custom behavior when messages
                        fail and Quality of Service limits have been reached. </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Discovery</emphasis> - Services are automatically
                        discovered along the bus by service name. End-point URLs are not needed to
                        connect to services. </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Reliability</emphasis> - Should problems arise,
                        messages sent to services via queues or synchronous calls automatically
                        fail-over to any other services bound to the same name on the bus. Services
                        that are not available are removed from the bus until they come back online,
                        at which time they will be rediscovered for messaging. </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Persisted Callback</emphasis> - Callback objects can
                        be sent with any message. This object will be called each time the message
                        is received with the response of the service (think topic as opposed to
                        queue). In this way, we can deploy services for messaging that actually
                        return values. </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Primitive Business Activity Monitoring</emphasis> -
                        If turned on, each call to every service, including the parameters pass into
                        that service, is recorded. This feature can be turned on and off at runtime.
                    </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Spring-Based Integration</emphasis> - KSB is
                        designed with Spring-based integration in mind. A typical scenario is making
                        an existing Spring-based POJO available for remote asynchronous calls.
                    </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Programmatic Based Integration</emphasis> - KSB can
                        be configured programmatically if Spring configuration is not desired.
                        Services can also be added and removed from the bus programmatically at
                        runtime. </para>
                </listitem>
            </itemizedlist>
        </sect2>
        <sect2>
            <title>Bean-Based Services</title>
            <para>Typically, KSB programming is centered on exposing Spring-configured beans to
                other calling code using a number of different protocols. Using this paradigm the
                client developer and the organization can rapidly build and consume services, often
                a daunting challenge using other buses.</para>
        </sect2>
        <sect2>
            <title>Overview of Supported Service Protocols</title>
            <figure>
                <title>Supported Service Protocols</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="../images/supported_service_protocols.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <para>This drawing is conceptual and not representative of true deployment architecture.
                Essentially, the KSB is a registry with service-calling behavior on the client end
                (Java client). All policies and behaviors (async as opposed to sync) are coordinated
                on the client. The client offers some very attractive messaging features: <itemizedlist>
                    <listitem>
                        <para><emphasis role="bold">Synchronization</emphasis> of message sending
                            with currently running transaction (meaning all messages sent during a
                            transaction are ONLY sent if the transaction is successfully committed)
                        </para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Failover</emphasis> - If a call to a service
                            comes back with a 404 (or various other network-related errors), it will
                            try to call other services of the same name on the bus. This is for both
                            sync and async calls. </para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Load balancing</emphasis> - Clients will
                            round-robin call services of the same name on the bus. Proxy instances,
                            however, are bound to single machines if you want to keep a line of
                            communication open to a single machine for long periods of time.</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Topics and Queues</emphasis>
                        </para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Persistent messages</emphasis> - When using
                            message persistence a message cannot be lost. It will be persisted until
                            it is sent.</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Message Driven Service Execution</emphasis> -
                            Bind standard JavaBean services to messaging queues for message driven
                            beans. </para>
                    </listitem>
                </itemizedlist></para>
        </sect2>
    </sect1>
    <sect1>
        <title>Message Queue</title>
        <para>Use the Message Queue section to administer the KNS message queuing system. You can
            find it on the Administration menu. </para>
        <para>It has three main sections: Current Node Info, the message filter and fetch section,
            and the Documents currently in route queue section.</para>
        <figure><title>Message Queue: Documents Currently In Route</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="../images/message_queue.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <sect2>
            <title>Current Node Info</title>
            <itemizedlist>
                <listitem>
                    <para><emphasis role="bold">IP Address</emphasis>: This value equals the IP
                        address of the machine: Rice</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">message.persistence</emphasis>: If true, then
                        messages will be persisted to the datastore. Otherwise, they will only be
                        stored in memory. If message persistence is not turned on and the server is
                        shutdown while there are still messages in queue, those messages will be
                        lost. For a production environment, it is recommended that message
                        persistence be set to true. </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">message.delivery</emphasis>: Can be set to either
                        "synchronous" or "async". If this is set to synchronous, then messages that
                        are sent in an asynchronous fashion using the KSB application interface
                        (API) will be sent synchronously. This is useful in certain development and
                        unit testing scenarios. For a production environment, it is recommended that
                        message delivery be set to async. </para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">message.off</emphasis>: If set to "true" then
                        asynchronous messages will not be sent. In the case that message persistence
                        is turned on, they will be persisted in the message store and can even be
                        picked up later using the Message Fetcher. However, if message persistence
                        is turned off, these messages will be lost. This can be useful in certain
                        debugging or testing scenarios. </para>
                </listitem>
            </itemizedlist>
        </sect2>
        <sect2>
            <title>Message Filter and Fetch</title>
            <para>The message filter and fetch section of the Message Queue screen lets you search
                for, filter, and/or isolate messages in the Documents in route queue. To use the
                Message Filter section, enter your criteria and click the Filter button:</para>
            <para>
                <figure>
                    <title>Message Filter Screen</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="../images/message_filter_screen.png"/>
                        </imageobject>
                    </mediaobject>                        
                </figure>
            </para>
            <para>
                <table frame="none">
                    <title>Message Filter Screen: Attributes</title>
                    <tgroup cols="2">
                        <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                        <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                        <thead>
                            <row>
                                <entry>Field</entry>
                                <entry>Description</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>Message ID</entry>
                                <entry>A unique 5-digit message queue identification number</entry>
                            </row>
                            <row>
                                <entry>Service Name</entry>
                                <entry>The name of the service</entry>
                            </row>
                            <row>
                                <entry>Application ID</entry>
                                <entry>The service container's identifier</entry>
                            </row>
                            <row>
                                <entry>IP Number</entry>
                                <entry>The message initiator's IP address</entry>
                            </row>
                            <row>
                                <entry>Queue Status</entry>
                                <entry><para>You can sort documents by the queue status. The queue status may be:</para>
                                    <itemizedlist>
                                        <listitem>
                                            <para>QUEUED: The message is waiting for a worker thread
                                                to pick it up </para>
                                        </listitem>
                                        <listitem>
                                            <para>ROUTING: A worker is currently working on the
                                                message. </para>
                                        </listitem>
                                        <listitem>
                                            <para>EXCEPTION: There is a problem with the message and
                                                the route manager will ignore it. EXCEPTION status
                                                is typically set manually by the administrator to
                                                suspend a route queue entry until a problem can be
                                                diagnosed. </para>
                                        </listitem>
                                    </itemizedlist></entry>
                            </row>
                            <row>
                                <entry>App Specific Value 1</entry>
                                <entry>The specific value of a document</entry>
                            </row>
                            <row>
                                <entry>App Specific Value 2</entry>
                                <entry>The specific value of a document</entry>
                            </row>
                            <row>
                                <entry>Filter Button</entry>
                                <entry>Click to execute the search filter</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
            </para>
            <para>The Execute Message Fetcher button retrieves all the messages in the route queue.
                You can adjust the number of messages requested by entering a number in the field
                left of the button. </para>
            <para>When you click the Execute Message Fetcher button, a dialog box appears,
                confirming that you want to execute this command:</para>
            <figure><title>Execute Message Filter: Confirmation Screen</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="../images/execute_message_fetcher_message.png"
                            scale="75"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <para>KSB displays the results of a search and/or filter at the bottom of the page in
                the Documents currently in route queue table.</para>
            <figure><title>Documents In Route Queue</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="../images/docs_inroute_queue_table.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
        </sect2>
        <sect2>
            <title>Documents Currently in Route Queue</title>
            <table frame="none">
                <title>Documents Currently in Route Queue: Attributes</title>
                <tgroup cols="2">
                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                    <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                    <thead>
                        <row>
                            <entry>Field</entry>
                            <entry/>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>Message Queue ID</entry>
                            <entry>A unique 5-digit message queue identification number. This is the
                                same as the Message ID in the Message Filter section.</entry>
                        </row>
                        <row>
                            <entry>Service Name</entry>
                            <entry>The name of the service </entry>
                        </row>
                        <row>
                            <entry>Message Entity</entry>
                            <entry/>
                        </row>
                        <row>
                            <entry>IP Number</entry>
                            <entry>The message initiator's IP address</entry>
                        </row>
                        <row>
                            <entry>Queue Status</entry>
                            <entry><para>You can sort documents by the queue status. The queue status may be:</para>
                                <itemizedlist>
                                    <listitem>
                                        <para>QUEUED: The message is waiting for a worker thread to
                                            pick it up </para>
                                    </listitem>
                                    <listitem>
                                        <para>ROUTING: A worker is currently working on the message.
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>EXCEPTION: There is a problem with the message and the
                                            route manager will ignore it. EXCEPTION status is
                                            typically set manually by the administrator to suspend a
                                            route queue entry until a problem can be diagnosed.
                                        </para>
                                    </listitem>
                                </itemizedlist></entry>
                        </row>
                        <row>
                            <entry>Queue Priority</entry>
                            <entry>The priority of the entry in the queue. Entries with the smallest
                                number are processed first.</entry>
                        </row>
                        <row>
                            <entry>Queue Date</entry>
                            <entry>The date on which the queue entry should be processed. If the
                                queue checker runs and discovers entries that have a queue date that
                                are equal to or earlier than the current time, it processes them.
                                The approximate time at which this screenshot was taken 4:53
                                PM.</entry>
                        </row>
                        <row>
                            <entry>Expiration Date</entry>
                            <entry/>
                        </row>
                        <row>
                            <entry>Retry Count</entry>
                            <entry/>
                        </row>
                        <row>
                            <entry>App Specific Value 1</entry>
                            <entry/>
                        </row>
                        <row>
                            <entry>App Specific Value 2</entry>
                            <entry/>
                        </row>
                        <row>
                            <entry>Actions</entry>
                            <entry><para>Click a link in this field to:</para>
                                <itemizedlist>
                                    <listitem>
                                        <para><emphasis role="bold">View</emphasis>: View the detail
                                            message report </para>
                                    </listitem>
                                    <listitem>
                                        <para><emphasis role="bold">Edit</emphasis>: Edit the
                                            settings of a Message Entry </para>
                                    </listitem>
                                    <listitem>
                                        <para><emphasis role="bold">ReQueue</emphasis>: Enforce the
                                            routing process </para>
                                    </listitem>
                                </itemizedlist></entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </sect2>
        <sect2>
            <title>View</title>
            <para>When you click View in the Actions menu, KSB displays information about that
                message. Most of the initial information is the same as that displayed in the
                Documents currently in route queue table. Additional information on the View screen:<itemizedlist>
                    <listitem>
                        <para><emphasis role="bold">Message</emphasis><table frame="none">
                                <title>Message: Attributes</title>
                                <tgroup cols="2">
                                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                                    <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                                    <thead>
                                        <row>
                                            <entry>Field</entry>
                                            <entry>Description</entry>
                                        </row>
                                    </thead>
                                    <tbody>
                                        <row>
                                            <entry>Application ID: </entry>
                                            <entry>The service container's identifier</entry>
                                        </row>
                                        <row>
                                            <entry>Method Name: </entry>
                                            <entry/>
                                        </row>
                                    </tbody>
                                </tgroup>
                            </table></para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Payload</emphasis><table frame="none">
                                <title>Payload: Attributes</title>
                                <tgroup cols="2">
                                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                                    <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                                    <thead>
                                        <row>
                                            <entry>Field</entry>
                                            <entry>Description</entry>
                                        </row>
                                    </thead>
                                    <tbody>
                                        <row>
                                            <entry>Payload Class</entry>
                                            <entry>The class of the Payload</entry>
                                        </row>
                                        <row>
                                            <entry>Method Name</entry>
                                            <entry>The name of the method used in this
                                                document</entry>
                                        </row>
                                        <row>
                                            <entry>ignoreStoreAndForward</entry>
                                            <entry>A true and false indicator that ignores the store
                                                functions and forwards the message</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.messageEntryId</entry>
                                            <entry>A unique 4-digit message entry identification
                                                number</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.ServiceNamespace</entry>
                                            <entry>The application</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.serverIp</entry>
                                            <entry>The server's IP address</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.ServiceName</entry>
                                            <entry>The name of the service</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.endpointUrl</entry>
                                            <entry>The web address of the service</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.queue</entry>
                                            <entry><para>A true and false indicator that activates the queue or topic function:</para>
                                                <itemizedlist>
                                                  <listitem>
                                                  <para>"True" uses the Queue method, which sends
                                                  the message to one contact at a time</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>"False" uses the Topic method, which sends
                                                  the message to all contacts at once</para>
                                                  </listitem>
                                                </itemizedlist></entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.alive</entry>
                                            <entry>A true and false indicator that shows the
                                                activity state of the document</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.priority</entry>
                                            <entry>The priority of the entry for execution. Entries
                                                with the smallest number are processed first</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.retryAttempts</entry>
                                            <entry>How many times KSB will try to resend the
                                                message</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.millisToLive</entry>
                                            <entry><para>An expiration indicator:</para>
                                                <itemizedlist>
                                                  <listitem>
                                                  <para>1 means the message never expires</para>
                                                  </listitem>
                                                </itemizedlist></entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.messageExceptionHandler</entry>
                                            <entry>This provides a reference the service can use to
                                                call back.</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.serviceclass</entry>
                                            <entry>The name of the service class</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.busSecurity</entry>
                                            <entry>A true and false indicator that assigns the
                                                security function</entry>
                                        </row>
                                        <row>
                                            <entry>ServiceInfo.credentialsType</entry>
                                            <entry>The credential type of the document</entry>
                                        </row>
                                        <row>
                                            <entry>Arguments</entry>
                                            <entry>The argument of this document</entry>
                                        </row>
                                    </tbody>
                                </tgroup>
                            </table></para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Edit</emphasis></para>
                        <para>When you click <emphasis role="bold">Edit</emphasis> in the <emphasis
                                role="bold">Actions</emphasis> menu, KSB displays the editable
                            fields for that message. Fields on the Edit screen:<table frame="none">
                                <title>Edit Screen: Attributes</title>
                                <tgroup cols="2">
                                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                                    <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                                    <thead>
                                        <row>
                                            <entry>Field</entry>
                                            <entry>Description</entry>
                                        </row>
                                    </thead>
                                    <tbody>
                                        <row>
                                            <entry>Queue Priority</entry>
                                            <entry>Change the queue priority by entering a positive
                                                number. A smaller number has higher priority for
                                                execution.</entry>
                                        </row>
                                        <row>
                                            <entry>Queue Status</entry>
                                            <entry>Change the status to Queued, Routing, or
                                                Exception.</entry>
                                        </row>
                                        <row>
                                            <entry>Retry Count</entry>
                                            <entry>Change the number of times KSB will
                                                retry.</entry>
                                        </row>
                                        <row>
                                            <entry>IP Number</entry>
                                            <entry>Change the initiator's IP address.</entry>
                                        </row>
                                        <row>
                                            <entry>Service Name</entry>
                                            <entry>Change the name of the service.</entry>
                                        </row>
                                        <row>
                                            <entry>Message Entity</entry>
                                            <entry>Change the message entity.</entry>
                                        </row>
                                        <row>
                                            <entry>Method Name</entry>
                                            <entry>Change the method.</entry>
                                        </row>
                                        <row>
                                            <entry>App Specific Value 1</entry>
                                            <entry>Change the information for the specific value
                                                1.</entry>
                                        </row>
                                        <row>
                                            <entry>App Specific Value 2</entry>
                                            <entry>Change the information for the specific value
                                                2.</entry>
                                        </row>
                                    </tbody>
                                </tgroup>
                            </table></para>
                            <para>Functional links on the Edit page:<table frame="none">
                                <title>Edit Screen: Links</title>
                                <tgroup cols="2">
                                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                                    <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                                    <thead>
                                        <row>
                                            <entry>Field</entry>
                                            <entry>Description</entry>
                                        </row>
                                    </thead>
                                    <tbody>
                                        <row>
                                            <entry>Save Changes</entry>
                                            <entry>Save the information you just changed.</entry>
                                        </row>
                                        <row>
                                            <entry>Save Changes and Resubmit</entry>
                                            <entry>Save the information you changed and resubmit the
                                                message.</entry>
                                        </row>
                                        <row>
                                            <entry>Save and Forward</entry>
                                            <entry>Save the message and send it to the next
                                                contact.</entry>
                                        </row>
                                        <row>
                                            <entry>Delete</entry>
                                            <entry>Delete the message.</entry>
                                        </row>
                                        <row>
                                            <entry>Reset</entry>
                                            <entry>Reload the previous settings. This undoes the
                                                changes that you made on this screen, as long as you
                                                haven’t yet saved them.</entry>
                                        </row>
                                        <row>
                                            <entry>Clear Message</entry>
                                            <entry>Clear all information fields on this
                                                page.</entry>
                                        </row>
                                    </tbody>
                                </tgroup>
                            </table></para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">ReQueue</emphasis></para>
                        <para>When you click ReQueue in the Actions menu, KSB displays this pop-up
                            message:</para>
                        <figure><title>Requeue Documents: Confirmation Screen</title>
                            <mediaobject>
                                <imageobject>
                                    <imagedata fileref="../images/requeue_confirmation.png"/>
                                </imageobject>
                            </mediaobject>
                        </figure>
                    </listitem>
                </itemizedlist></para>
        </sect2>
    </sect1>
    <sect1>
        <title>Thread Pool</title>
        <para><emphasis role="bold">Thread pool</emphasis> is a feature that improves overall system
            performance by creating a pool of threads which can be independently used by the system
            to execute multiple tasks at the same time. A task can execute immediately if there is a
            thread in the pool that is available. If no thread is available, the task waits for a
            thread to become available from the pool before executing.</para>
        <para>The <emphasis role="bold">Thread Pool</emphasis> screen is accessed from the <emphasis
                role="bold">Administration</emphasis> menu. It tells you the current state of the
            Thread Pool and allows you to change four parameters for the Thread Pool. The core pool
            size, the maximum pool size, the RouteQueue.TimeIncrement and the
            RouteQueue.maxRetryAttempts.</para>
        <figure><title>Thread Pool Administration Page</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="../images/thread_pool_administration.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>
            <table frame="none">
                <title>Thread Pool: Attributes</title>
                <tgroup cols="2">
                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                    <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                    <thead>
                        <row>
                            <entry>Field</entry>
                            <entry>Description</entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>Core Pool Size</entry>
                            <entry>A positive number equal to the core number of threads in the
                                pool</entry>
                        </row>
                        <row>
                            <entry>Maximum Pool Size</entry>
                            <entry>A positive number equal to the maximum number of threads in the
                                pool; when the Core Pool Size is larger than the Maximum Pool Size,
                                Maximum Pool Size automatically sets the pool size equal to the Core
                                Pool Size</entry>
                        </row>
                        <row>
                            <entry>Pool Size</entry>
                            <entry>The current number of threads in the pool</entry>
                        </row>
                        <row>
                            <entry>Active Count</entry>
                            <entry>The approximate number of threads that are actively executing
                                tasks</entry>
                        </row>
                        <row>
                            <entry>Largest Pool Size</entry>
                            <entry>Maximum number of threads allowed in the Thread Pool</entry>
                        </row>
                        <row>
                            <entry>Keep Alive Time</entry>
                            <entry>The amount of time which threads in excess of the core pool size
                                may remain idle before being terminated; measured in milliseconds;
                                for example, 60,000 milliseconds = 60 seconds</entry>
                        </row>
                        <row>
                            <entry>Task Count</entry>
                            <entry>Number of tasks that have been scheduled for execution</entry>
                        </row>
                        <row>
                            <entry>Completed Task Count</entry>
                            <entry>Number of tasks that have completed execution</entry>
                        </row>
                        <row>
                            <entry>Execute Across All Servers with Application ID RICE</entry>
                            <entry>When you click this checkbox, then click the <emphasis
                                    role="bold">Update</emphasis> button, the update is applied
                                across all servers.</entry>
                        </row>
                        <row>
                            <entry>Update button</entry>
                            <entry>Click the <emphasis role="bold">Update</emphasis> button to
                                execute the changes you entered in the editable fields
                                above.</entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </para>
    </sect1>
    <sect1>
        <title>Service Registry</title>
        <para>The Service Registry lists published and temporary services that are available for the
            local machine. You cannot configure the service registry here; this is only information
            about the registry. </para>
        <para>Display this page by clicking the <emphasis role="bold">Service Registry</emphasis>
            link on the Rice <emphasis role="bold">Administration</emphasis> page.</para>
        <para>At the top of the page, the <emphasis role="bold">Current Node Info</emphasis> table
            shows the settings and configuration of the local machine:</para>
        <para>The returned table of services is divided into three sections:<orderedlist>
                <listitem>
                    <para>Published Services: Services in use by the local machine</para>
                </listitem>
                <listitem>
                    <para>Published Temp Services: Temporary services that are the result of Object
                        Remoting. For more information about Object Remoting, please refer to the
                        Object Remoting section of the KSB portion of the Technical Reference
                        Guide.</para>
                </listitem>
                <listitem>
                    <para>All Registry Services</para>
                </listitem>
            </orderedlist></para>
        <para>This screen print shows the top of a Service Registry page, with the <emphasis
                role="bold">Current Node Info</emphasis> table and the beginning of the <emphasis
                role="bold">Published Services</emphasis> table, as well as the refresh link and
            button:</para>
        <figure><title>Service Registery</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="../images/service_registry_top.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>To update the list of published services, use either the <emphasis role="bold">Refresh
                Page</emphasis> link in the header at the top of the page or the "Refresh Service
            Registry" button.</para>
        <para>This screen print shows the point on a Service Registry page where KSB displays a
            notation that there are no published temporary services and the beginning of the
                <emphasis role="bold">All Registry Services</emphasis> table:</para>
        <figure><title>Service Reigstery Results</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="../images/service_registry_bottom.png"/>
                </imageobject>
            </mediaobject>
        </figure>
    </sect1>
    <sect1>
        <title>Quartz</title>
        <para>The Kuali Service Bus (KSB) uses Quartz to schedule delayed tasks, including retry
            attempts for messages that cannot be sent the first time. By default, KSB uses an
            embedded quartz scheduler that can be configured by passing parameters starting with
            "ksb.org.quartz." into the Rice configuration.</para>
        <para>You can inject a custom quartz scheduler if the application is already running one.
            See the Technical Reference Guide for KSB, Configuring Quartz for KSB for more
            information. </para>
        <para>Quartz is also known as the <emphasis role="bold">Exception Routing Queue</emphasis>. </para>
        <figure><title>Exception Routing Queue</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="../images/exception_routing_queue.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>When you click the Quartz link on the Kuali Rice Portal Administration page, KSB
            displays the screen shown above. The contents of the table can be sorted in ascending or
            descending order by clicking on a column title. This technique works for all columns
            except Actions. The table contains this information on each job that is
            scheduled:</para>
        <para>
            <table frame="none">
                <title>Exception Routing Queue: Attributes</title>
                <tgroup cols="2">
                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                    <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                    <thead>
                        <row>
                            <entry>Field</entry>
                            <entry>Description</entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>Job Name</entry>
                            <entry>Unique name for the job</entry>
                        </row>
                        <row>
                            <entry>Job Group</entry>
                            <entry>Classification of the job</entry>
                        </row>
                        <row>
                            <entry>Description</entry>
                            <entry>Text description of what this job does</entry>
                        </row>
                        <row>
                            <entry>Time to execute</entry>
                            <entry>The scheduled date and time for the job to occur</entry>
                        </row>
                        <row>
                            <entry>FullName</entry>
                            <entry>A more descriptive Job Name</entry>
                        </row>
                        <row>
                            <entry>Actions</entry>
                            <entry>Put in message queue effectively is a button that takes that
                                message out of quartz and sends it back into the KSB to be retried
                                without waiting until the scheduled time.</entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </para>
    </sect1>
    <sect1>
        <title>Security Management</title>
        <para>For client applications to consume secured services hosted from a standalone Rice
            server, the implementer must generate a keystore in KSB. KSB security relies on the
            creation of a keystore using the JVM keytool.</para>
        <figure><title>Create Keystore</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="../images/create_keystore.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>To create a new Client Keystore file, complete all three fields and click the create
            button that is just below the fields:</para>
        <figure><title>Create Keystore: File Section</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="../images/create_keystore_file.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>The <emphasis role="bold">Desired Alias</emphasis> (name for the new keystore you are
            creating) must be unique among your keystores. KSB automatically displays a list of
            existing Keystore entries for your reference below the <emphasis role="italic">Create
                new Client Keystore file</emphasis> table. The data in this list can be sorted in
            ascending or descending order by clicking the column heading for any column except
                <emphasis role="italic">Actions</emphasis>. </para>
        <figure><title>Create Keystore: Existing Keystore Section</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="../images/existing_keystore_entries.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>
            <table frame="none">
                <title>Existing Keystore Entries: Attributes</title>
                <tgroup cols="2">
                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                    <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                    <thead>
                        <row>
                            <entry>Field</entry>
                            <entry>Description</entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>Alias</entry>
                            <entry>Keystore name</entry>
                        </row>
                        <row>
                            <entry>Create Date</entry>
                            <entry>Date and time the keystore was created</entry>
                        </row>
                        <row>
                            <entry>Type</entry>
                            <entry>The type of keystore </entry>
                        </row>
                        <row>
                            <entry>Actions</entry>
                            <entry/>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </para>
    </sect1>
</chapter>
